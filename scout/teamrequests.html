<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Requests - TalantaScout</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/scoutdashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2>üéØ TalantaScout</h2>
                <span class="package-badge current-tier">GOLD</span>
            </div>
            <nav class="sidebar-menu">
                <a href="dashboard.html">‚≠ê Dashboard</a>
                <a href="playersearch.html">üîç Player Search</a>
                <a href="watchlist.html">üìã Watchlist</a>
                <a href="teamrequests.html" class="active">üì• Team Requests</a>
                <a href="messages.html">‚úâÔ∏è Messages</a>
                <a href="profile.html">üë§ Profile</a>
            </nav>
            <a href="../index.html" class="logout-btn">üö™ Logout</a>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <header class="dashboard-header">
                <h1>Team Requests</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="filterBtn">Filter Requests</button>
                    <button class="btn btn-primary" id="sendRequestBtn" data-min-package="silver">Send New Request</button>
                </div>
            </header>
            
            <!-- Stats Cards -->
            <section class="stats-grid">
                <div class="stat-card">
                    <h3>Pending Requests</h3>
                    <p class="stat-value">12</p>
                    <span class="stat-label">Awaiting Response</span>
                </div>
                
                <div class="stat-card" data-min-package="bronze">
                    <h3>Accepted</h3>
                    <p class="stat-value">5</p>
                    <span class="stat-label">This Month</span>
                </div>
                
                <div class="stat-card" data-min-package="silver">
                    <h3>Response Rate</h3>
                    <p class="stat-value">68%</p>
                    <span class="stat-label">Overall</span>
                </div>
                
                <div class="stat-card" data-min-package="gold">
                    <h3>Active Negotiations</h3>
                    <p class="stat-value">3</p>
                    <span class="stat-label">In Progress</span>
                </div>
            </section>
            
            <!-- Tabs for Request Types -->
            <section class="tabs-section">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="incoming">Incoming (8)</button>
                    <button class="tab-btn" data-tab="sent" data-min-package="bronze">Sent (12)</button>
                    <button class="tab-btn" data-tab="archived" data-min-package="silver">Archived (20)</button>
                </div>
            </section>
            
            <!-- Incoming Requests Table -->
            <section class="requests-section" id="incomingTab">
                <h2>Incoming Requests</h2>
                <div class="table-container">
                    <table id="requestsTable">
                        <thead>
                            <tr>
                                <th>Team/Club</th>
                                <th>Player Requested</th>
                                <th>Position</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="requestsTableBody">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="pagination" id="pagination">
                    <!-- Generated by JavaScript -->
                </div>
            </section>
        </main>
    </div>
    
    <script src="../assets/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Scout Team Requests initialized');
            
            const requests = generateRequestsData();
            renderRequests(requests, 1);
            
            // Tab switching
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            document.getElementById('sendRequestBtn')?.addEventListener('click', sendNewRequest);
        });
        
        function generateRequestsData() {
            const teams = ['Gor Mahia FC', 'AFC Leopards', 'Tusker FC', 'Bandari FC', 'KCB FC', 'Ulinzi Stars', 'Mathare United', 'Sofapaka FC', 'Nakuru FC', 'Nzoia Sugar', 'Vihiga United', 'Kariobangi Sharks', 'Posta Rangers', 'Zoo Kericho', 'Kenya Police', 'Bidco United', 'Muranga Seal', 'Talanta FC', 'Nairobi City Stars', 'Wazito FC'];
            const players = ['John Doe', 'Jane Smith', 'Peter Omondi', 'Mary Wanjiku', 'David Kimani'];
            const positions = ['Forward', 'Midfielder', 'Defender', 'Goalkeeper'];
            const statuses = ['Pending', 'Under Review', 'Negotiating'];
            
            const requests = [];
            for (let i = 0; i < 20; i++) {
                requests.push({
                    id: i + 1,
                    team: teams[i % teams.length],
                    player: players[i % players.length],
                    position: positions[i % positions.length],
                    date: new Date(2025, 10, Math.floor(Math.random() * 14) + 1).toLocaleDateString(),
                    status: statuses[i % statuses.length]
                });
            }
            return requests;
        }
        
        function renderRequests(requests, page = 1) {
            const perPage = 5;
            const start = (page - 1) * perPage;
            const end = start + perPage;
            const paginatedRequests = requests.slice(start, end);
            
            const tbody = document.getElementById('requestsTableBody');
            tbody.innerHTML = '';
            
            paginatedRequests.forEach(request => {
                const row = document.createElement('tr');
                const statusClass = request.status === 'Pending' ? 'status-pending' : 
                                  request.status === 'Negotiating' ? 'status-negotiating' : 'status-review';
                
                row.innerHTML = `
                    <td><strong>${request.team}</strong></td>
                    <td>${request.player}</td>
                    <td>${request.position}</td>
                    <td>${request.date}</td>
                    <td><span class="status-badge ${statusClass}">${request.status}</span></td>
                    <td>
                        <button class="btn-action" onclick="viewRequest(${request.id})">View</button>
                        <button class="btn-action btn-success" onclick="acceptRequest(${request.id})">Accept</button>
                        <button class="btn-action btn-danger" onclick="declineRequest(${request.id})">Decline</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            renderPagination(requests.length, page, perPage);
        }
        
        function renderPagination(totalItems, currentPage, perPage) {
            const totalPages = Math.ceil(totalItems / perPage);
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement('button');
                btn.textContent = i;
                btn.className = i === currentPage ? 'page-btn active' : 'page-btn';
                btn.onclick = () => renderRequests(generateRequestsData(), i);
                pagination.appendChild(btn);
            }
        }
        
        function viewRequest(requestId) {
            console.log('Viewing request:', requestId);
            alert('Request details will open in a modal');
        }
        
        function acceptRequest(requestId) {
            if (confirm('Accept this request?')) {
                console.log('Accepting request:', requestId);
                alert('Request accepted! Team will be notified.');
                location.reload();
            }
        }
        
        function declineRequest(requestId) {
            if (confirm('Decline this request?')) {
                console.log('Declining request:', requestId);
                alert('Request declined.');
                location.reload();
            }
        }
        
        function sendNewRequest() {
            console.log('Send new request');
            alert('New request form will open');
        }
    </script>
</body>
</html>

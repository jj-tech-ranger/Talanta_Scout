<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training Plans - Coach Dashboard</title>
    <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>TalantaScout</h2>
            <p class="user-role">Coach</p>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard.html"><i class="icon">üìä</i> Dashboard</a>
            <a href="teammanagement.html"><i class="icon">üë•</i> Team Management</a>
            <a href="trainingplans.html" class="active"><i class="icon">üèãÔ∏è</i> Training Plans</a>
            <a href="matchanalysis.html"><i class="icon">‚öΩ</i> Match Analysis</a>
            <a href="recruitmentpipeline.html"><i class="icon">üîç</i> Recruitment Pipeline</a>
            <a href="messages.html"><i class="icon">üí¨</i> Messages</a>
            <a href="profile.html"><i class="icon">üë§</i> Profile</a>
            <a href="../index.html"><i class="icon">üö™</i> Logout</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <header class="page-header">
            <h1>Training Plans</h1>
            <div class="header-actions">
                <button class="btn-primary" onclick="createNewPlan()">+ Create New Plan</button>
            </div>
        </header>

        <!-- Training Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Active Plans</h3>
                <p class="stat-value" id="activePlans">5</p>
            </div>
            <div class="stat-card">
                <h3>This Week's Sessions</h3>
                <p class="stat-value" id="weekSessions">8</p>
            </div>
            <div class="stat-card">
                <h3>Completion Rate</h3>
                <p class="stat-value" id="completionRate">87%</p>
            </div>
            <div class="stat-card">
                <h3>Avg. Attendance</h3>
                <p class="stat-value" id="avgAttendance">92%</p>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <input type="text" id="searchPlan" placeholder="Search training plans..." oninput="filterPlans()">
            <select id="filterCategory" onchange="filterPlans()">
                <option value="">All Categories</option>
                <option value="Strength">Strength</option>
                <option value="Endurance">Endurance</option>
                <option value="Technical">Technical</option>
                <option value="Tactical">Tactical</option>
            </select>
            <select id="filterStatus" onchange="filterPlans()">
                <option value="">All Status</option>
                <option value="Active">Active</option>
                <option value="Scheduled">Scheduled</option>
                <option value="Completed">Completed</option>
            </select>
        </div>

        <!-- Training Plans Table -->
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Plan Name</th>
                        <th>Category</th>
                        <th>Duration</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Sessions</th>
                        <th>Participants</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="plansTable">
                    <!-- Table rows will be generated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <!-- Pagination buttons will be generated by JavaScript -->
        </div>
    </div>

    <script>
        // Sample training plans data
        let plansData = [];
        let filteredData = [];
        let currentPage = 1;
        const itemsPerPage = 5;

        // Generate sample training plans
        function generatePlansData() {
            const planNames = [
                'Pre-Season Conditioning', 'Technical Skill Development', 'Match Day Preparation',
                'Tactical Awareness Training', 'Speed and Agility Program', 'Youth Team Development',
                'Goalkeeper Specialized Training', 'Set Piece Mastery', 'Defensive Formation Drills',
                'Attacking Strategy Workshop', 'Recovery and Flexibility', 'Mental Conditioning Program',
                'Ball Control Masterclass', 'Team Building Exercises', 'Fitness Assessment Week',
                'Position-Specific Training', 'High-Intensity Interval Training', 'Video Analysis Sessions',
                'Nutrition and Wellness', 'End of Season Review'
            ];
            const categories = ['Strength', 'Technical', 'Tactical', 'Endurance'];
            const statuses = ['Active', 'Active', 'Active', 'Scheduled', 'Completed'];
            const durations = ['2 weeks', '4 weeks', '6 weeks', '8 weeks', '3 weeks'];
            
            for (let i = 0; i < 20; i++) {
                const startDate = new Date(2025, 0, Math.floor(Math.random() * 28) + 1);
                const endDate = new Date(startDate);
                endDate.setDate(endDate.getDate() + (Math.floor(Math.random() * 4) + 2) * 7);
                
                plansData.push({
                    id: i + 1,
                    name: planNames[i],
                    category: categories[i % 4],
                    duration: durations[i % 5],
                    startDate: startDate.toLocaleDateString('en-GB'),
                    endDate: endDate.toLocaleDateString('en-GB'),
                    sessions: Math.floor(Math.random() * 15) + 5,
                    participants: Math.floor(Math.random() * 10) + 15,
                    status: statuses[i % statuses.length]
                });
            }
            filteredData = [...plansData];
        }

        // Filter plans
        function filterPlans() {
            const searchTerm = document.getElementById('searchPlan').value.toLowerCase();
            const categoryFilter = document.getElementById('filterCategory').value;
            const statusFilter = document.getElementById('filterStatus').value;

            filteredData = plansData.filter(plan => {
                const matchesSearch = plan.name.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || plan.category === categoryFilter;
                const matchesStatus = !statusFilter || plan.status === statusFilter;
                return matchesSearch && matchesCategory && matchesStatus;
            });

            currentPage = 1;
            renderTable();
        }

        // Render table
        function renderTable() {
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = filteredData.slice(startIndex, endIndex);

            const tableBody = document.getElementById('plansTable');
            tableBody.innerHTML = '';

            pageData.forEach(plan => {
                const statusClass = plan.status === 'Active' ? 'badge-success' : 
                                  plan.status === 'Scheduled' ? 'badge-info' : 'badge-secondary';
                const row = `
                    <tr>
                        <td><strong>${plan.name}</strong></td>
                        <td>${plan.category}</td>
                        <td>${plan.duration}</td>
                        <td>${plan.startDate}</td>
                        <td>${plan.endDate}</td>
                        <td>${plan.sessions}</td>
                        <td>${plan.participants}</td>
                        <td><span class="badge ${statusClass}">${plan.status}</span></td>
                        <td>
                            <button class="btn-small" onclick="viewPlan(${plan.id})">View</button>
                            <button class="btn-small btn-secondary" onclick="editPlan(${plan.id})">Edit</button>
                            <button class="btn-small btn-danger" onclick="deletePlan(${plan.id})">Delete</button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });

            renderPagination();
        }

        // Render pagination
        function renderPagination() {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.className = i === currentPage ? 'active' : '';
                button.onclick = () => {
                    currentPage = i;
                    renderTable();
                };
                paginationDiv.appendChild(button);
            }
        }

        // Plan actions
        function viewPlan(id) {
            const plan = plansData.find(p => p.id === id);
            alert(`Training Plan Details\n\nName: ${plan.name}\nCategory: ${plan.category}\nDuration: ${plan.duration}\nStart: ${plan.startDate}\nEnd: ${plan.endDate}\nSessions: ${plan.sessions}\nParticipants: ${plan.participants}\nStatus: ${plan.status}`);
        }

        function editPlan(id) {
            const plan = plansData.find(p => p.id === id);
            alert(`Edit Training Plan: ${plan.name}\n\nThis would open a form to modify the training plan details.`);
        }

        function deletePlan(id) {
            const plan = plansData.find(p => p.id === id);
            if (confirm(`Are you sure you want to delete the plan "${plan.name}"?`)) {
                plansData = plansData.filter(p => p.id !== id);
                filteredData = [...plansData];
                renderTable();
                alert(`Training plan "${plan.name}" has been deleted.`);
            }
        }

        function createNewPlan() {
            alert('Create New Training Plan\n\nThis would open a form to create a new training plan with categories, duration, and session details.');
        }

        // Initialize
        generatePlansData();
        renderTable();
    </script>
</body>
</html>

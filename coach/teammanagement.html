<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Management - Coach Dashboard</title>
    <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>TalantaScout</h2>
            <p class="user-role">Coach</p>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard.html"><i class="icon">üìä</i> Dashboard</a>
            <a href="teammanagement.html" class="active"><i class="icon">üë•</i> Team Management</a>
            <a href="trainingplans.html"><i class="icon">üèãÔ∏è</i> Training Plans</a>
            <a href="matchanalysis.html"><i class="icon">‚öΩ</i> Match Analysis</a>
            <a href="recruitmentpipeline.html"><i class="icon">üîç</i> Recruitment Pipeline</a>
            <a href="messages.html"><i class="icon">üí¨</i> Messages</a>
            <a href="profile.html"><i class="icon">üë§</i> Profile</a>
            <a href="../index.html"><i class="icon">üö™</i> Logout</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <header class="page-header">
            <h1>Team Management</h1>
            <div class="header-actions">
                <button class="btn-primary" onclick="showAddPlayerModal()">+ Add Player</button>
            </div>
        </header>

        <!-- Team Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Players</h3>
                <p class="stat-value" id="totalPlayers">20</p>
            </div>
            <div class="stat-card">
                <h3>Active Players</h3>
                <p class="stat-value" id="activePlayers">18</p>
            </div>
            <div class="stat-card">
                <h3>Injured Players</h3>
                <p class="stat-value" id="injuredPlayers">2</p>
            </div>
            <div class="stat-card">
                <h3>Average Age</h3>
                <p class="stat-value" id="avgAge">22.5</p>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <input type="text" id="searchPlayer" placeholder="Search by name..." oninput="filterPlayers()">
            <select id="filterPosition" onchange="filterPlayers()">
                <option value="">All Positions</option>
                <option value="Goalkeeper">Goalkeeper</option>
                <option value="Defender">Defender</option>
                <option value="Midfielder">Midfielder</option>
                <option value="Forward">Forward</option>
            </select>
            <select id="filterStatus" onchange="filterPlayers()">
                <option value="">All Status</option>
                <option value="Active">Active</option>
                <option value="Injured">Injured</option>
                <option value="Suspended">Suspended</option>
            </select>
        </div>

        <!-- Team Roster Table -->
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Player Name</th>
                        <th>Position</th>
                        <th>Age</th>
                        <th>Jersey #</th>
                        <th>Status</th>
                        <th>Appearances</th>
                        <th>Goals</th>
                        <th>Assists</th>
                        <th>Rating</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="teamTable">
                    <!-- Table rows will be generated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <!-- Pagination buttons will be generated by JavaScript -->
        </div>
    </div>

    <script>
        // Sample team data
        let teamData = [];
        let filteredData = [];
        let currentPage = 1;
        const itemsPerPage = 5;

        // Generate sample team data
        function generateTeamData() {
            const names = [
                'Brian Ochieng', 'James Kamau', 'David Mwangi', 'Patrick Otieno',
                'Samuel Njoroge', 'Michael Wanjala', 'Peter Ouma', 'John Kariuki',
                'Daniel Mutua', 'Francis Wanyama', 'Joseph Kimani', 'Martin Odero',
                'Anthony Kipchoge', 'Robert Okoth', 'Emmanuel Kiprotich', 'Kevin Barasa',
                'Stephen Cheruiyot', 'Victor Nganga', 'Alex Makokha', 'Collins Omondi'
            ];
            const positions = ['Goalkeeper', 'Defender', 'Midfielder', 'Forward'];
            const statuses = ['Active', 'Active', 'Active', 'Active', 'Active', 'Active', 'Active', 'Active', 'Injured', 'Suspended'];
            
            for (let i = 0; i < 20; i++) {
                teamData.push({
                    id: i + 1,
                    name: names[i],
                    position: positions[i % 4],
                    age: Math.floor(Math.random() * 10) + 18,
                    jersey: i + 1,
                    status: statuses[i % statuses.length],
                    appearances: Math.floor(Math.random() * 30) + 5,
                    goals: Math.floor(Math.random() * 15),
                    assists: Math.floor(Math.random() * 10),
                    rating: (Math.random() * 2 + 6).toFixed(1)
                });
            }
            filteredData = [...teamData];
        }

        // Filter players
        function filterPlayers() {
            const searchTerm = document.getElementById('searchPlayer').value.toLowerCase();
            const positionFilter = document.getElementById('filterPosition').value;
            const statusFilter = document.getElementById('filterStatus').value;

            filteredData = teamData.filter(player => {
                const matchesSearch = player.name.toLowerCase().includes(searchTerm);
                const matchesPosition = !positionFilter || player.position === positionFilter;
                const matchesStatus = !statusFilter || player.status === statusFilter;
                return matchesSearch && matchesPosition && matchesStatus;
            });

            currentPage = 1;
            renderTable();
        }

        // Render table
        function renderTable() {
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = filteredData.slice(startIndex, endIndex);

            const tableBody = document.getElementById('teamTable');
            tableBody.innerHTML = '';

            pageData.forEach(player => {
                const statusClass = player.status === 'Active' ? 'badge-success' : 
                                  player.status === 'Injured' ? 'badge-warning' : 'badge-danger';
                const row = `
                    <tr>
                        <td><strong>${player.name}</strong></td>
                        <td>${player.position}</td>
                        <td>${player.age}</td>
                        <td>${player.jersey}</td>
                        <td><span class="badge ${statusClass}">${player.status}</span></td>
                        <td>${player.appearances}</td>
                        <td>${player.goals}</td>
                        <td>${player.assists}</td>
                        <td>${player.rating}</td>
                        <td>
                            <button class="btn-small" onclick="viewPlayer(${player.id})">View</button>
                            <button class="btn-small btn-secondary" onclick="editPlayer(${player.id})">Edit</button>
                            <button class="btn-small btn-danger" onclick="removePlayer(${player.id})">Remove</button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });

            renderPagination();
        }

        // Render pagination
        function renderPagination() {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.className = i === currentPage ? 'active' : '';
                button.onclick = () => {
                    currentPage = i;
                    renderTable();
                };
                paginationDiv.appendChild(button);
            }
        }

        // Player actions
        function viewPlayer(id) {
            const player = teamData.find(p => p.id === id);
            alert(`Player Profile\n\nName: ${player.name}\nPosition: ${player.position}\nAge: ${player.age}\nJersey: ${player.jersey}\nStatus: ${player.status}\nAppearances: ${player.appearances}\nGoals: ${player.goals}\nAssists: ${player.assists}\nRating: ${player.rating}`);
        }

        function editPlayer(id) {
            const player = teamData.find(p => p.id === id);
            alert(`Edit Player: ${player.name}\n\nThis would open an edit form for updating player details.`);
        }

        function removePlayer(id) {
            const player = teamData.find(p => p.id === id);
            if (confirm(`Are you sure you want to remove ${player.name} from the team?`)) {
                teamData = teamData.filter(p => p.id !== id);
                filteredData = [...teamData];
                renderTable();
                alert(`${player.name} has been removed from the team.`);
            }
        }

        function showAddPlayerModal() {
            alert('Add New Player\n\nThis would open a form to add a new player to the team roster.');
        }

        // Initialize
        generateTeamData();
        renderTable();
    </script>
</body>
</html>

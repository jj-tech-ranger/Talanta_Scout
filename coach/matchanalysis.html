<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match Analysis - Coach Dashboard</title>
    <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>TalantaScout</h2>
            <p class="user-role">Coach</p>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard.html"><i class="icon">üìä</i> Dashboard</a>
            <a href="teammanagement.html"><i class="icon">üë•</i> Team Management</a>
            <a href="trainingplans.html"><i class="icon">üèãÔ∏è</i> Training Plans</a>
            <a href="matchanalysis.html" class="active"><i class="icon">‚öΩ</i> Match Analysis</a>
            <a href="recruitmentpipeline.html"><i class="icon">üîç</i> Recruitment Pipeline</a>
            <a href="messages.html"><i class="icon">üí¨</i> Messages</a>
            <a href="profile.html"><i class="icon">üë§</i> Profile</a>
            <a href="../index.html"><i class="icon">üö™</i> Logout</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <header class="page-header">
            <h1>Match Analysis</h1>
            <div class="header-actions">
                <button class="btn-primary" onclick="addNewMatch()">+ Add Match Report</button>
            </div>
        </header>

        <!-- Match Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Matches Played</h3>
                <p class="stat-value" id="matchesPlayed">20</p>
            </div>
            <div class="stat-card">
                <h3>Win Rate</h3>
                <p class="stat-value" id="winRate">65%</p>
            </div>
            <div class="stat-card">
                <h3>Goals Scored</h3>
                <p class="stat-value" id="goalsScored">42</p>
            </div>
            <div class="stat-card">
                <h3>Clean Sheets</h3>
                <p class="stat-value" id="cleanSheets">7</p>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <input type="text" id="searchMatch" placeholder="Search matches..." oninput="filterMatches()">
            <select id="filterResult" onchange="filterMatches()">
                <option value="">All Results</option>
                <option value="Win">Win</option>
                <option value="Draw">Draw</option>
                <option value="Loss">Loss</option>
            </select>
            <select id="filterCompetition" onchange="filterMatches()">
                <option value="">All Competitions</option>
                <option value="League">League</option>
                <option value="Cup">Cup</option>
                <option value="Friendly">Friendly</option>
            </select>
        </div>

        <!-- Match History Table -->
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Opponent</th>
                        <th>Competition</th>
                        <th>Venue</th>
                        <th>Score</th>
                        <th>Result</th>
                        <th>Possession</th>
                        <th>Shots</th>
                        <th>Pass Acc.</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="matchesTable">
                    <!-- Table rows will be generated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <!-- Pagination buttons will be generated by JavaScript -->
        </div>
    </div>

    <script>
        // Sample match data
        let matchData = [];
        let filteredData = [];
        let currentPage = 1;
        const itemsPerPage = 5;

        // Generate sample match data
        function generateMatchData() {
            const opponents = [
                'Gor Mahia FC', 'AFC Leopards', 'Tusker FC', 'Kakamega Homeboyz',
                'KCB FC', 'Bandari FC', 'Nzoia Sugar', 'Ulinzi Stars',
                'Posta Rangers', 'Sofapaka FC', 'Kariobangi Sharks', 'Wazito FC',
                'Zoo Kericho', 'Nairobi City Stars', 'Bidco United', 'Talanta FC',
                'Kenya Police FC', 'Mathare United', 'Vihiga Bullets', 'Muranga SEAL'
            ];
            const competitions = ['League', 'Cup', 'Friendly'];
            const venues = ['Home', 'Away'];
            const results = ['Win', 'Win', 'Win', 'Draw', 'Loss'];
            
            for (let i = 0; i < 20; i++) {
                const result = results[i % results.length];
                const homeScore = Math.floor(Math.random() * 4);
                const awayScore = result === 'Win' ? Math.floor(Math.random() * homeScore) : 
                                 result === 'Loss' ? homeScore + Math.floor(Math.random() * 3) + 1 : homeScore;
                const matchDate = new Date(2025, 0, i + 1);
                
                matchData.push({
                    id: i + 1,
                    date: matchDate.toLocaleDateString('en-GB'),
                    opponent: opponents[i],
                    competition: competitions[i % 3],
                    venue: venues[i % 2],
                    homeScore: homeScore,
                    awayScore: awayScore,
                    result: result,
                    possession: Math.floor(Math.random() * 30) + 40 + '%',
                    shots: Math.floor(Math.random() * 10) + 5,
                    passAccuracy: Math.floor(Math.random() * 15) + 75 + '%'
                });
            }
            filteredData = [...matchData];
        }

        // Filter matches
        function filterMatches() {
            const searchTerm = document.getElementById('searchMatch').value.toLowerCase();
            const resultFilter = document.getElementById('filterResult').value;
            const competitionFilter = document.getElementById('filterCompetition').value;

            filteredData = matchData.filter(match => {
                const matchesSearch = match.opponent.toLowerCase().includes(searchTerm);
                const matchesResult = !resultFilter || match.result === resultFilter;
                const matchesCompetition = !competitionFilter || match.competition === competitionFilter;
                return matchesSearch && matchesResult && matchesCompetition;
            });

            currentPage = 1;
            renderTable();
        }

        // Render table
        function renderTable() {
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = filteredData.slice(startIndex, endIndex);

            const tableBody = document.getElementById('matchesTable');
            tableBody.innerHTML = '';

            pageData.forEach(match => {
                const resultClass = match.result === 'Win' ? 'badge-success' : 
                                  match.result === 'Draw' ? 'badge-info' : 'badge-danger';
                const row = `
                    <tr>
                        <td>${match.date}</td>
                        <td><strong>${match.opponent}</strong></td>
                        <td>${match.competition}</td>
                        <td>${match.venue}</td>
                        <td><strong>${match.homeScore} - ${match.awayScore}</strong></td>
                        <td><span class="badge ${resultClass}">${match.result}</span></td>
                        <td>${match.possession}</td>
                        <td>${match.shots}</td>
                        <td>${match.passAccuracy}</td>
                        <td>
                            <button class="btn-small" onclick="viewAnalysis(${match.id})">View</button>
                            <button class="btn-small btn-secondary" onclick="editMatch(${match.id})">Edit</button>
                            <button class="btn-small btn-danger" onclick="deleteMatch(${match.id})">Delete</button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });

            renderPagination();
        }

        // Render pagination
        function renderPagination() {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.className = i === currentPage ? 'active' : '';
                button.onclick = () => {
                    currentPage = i;
                    renderTable();
                };
                paginationDiv.appendChild(button);
            }
        }

        // Match actions
        function viewAnalysis(id) {
            const match = matchData.find(m => m.id === id);
            alert(`Match Analysis\n\nDate: ${match.date}\nOpponent: ${match.opponent}\nCompetition: ${match.competition}\nVenue: ${match.venue}\nScore: ${match.homeScore} - ${match.awayScore}\nResult: ${match.result}\nPossession: ${match.possession}\nShots: ${match.shots}\nPass Accuracy: ${match.passAccuracy}`);
        }

        function editMatch(id) {
            const match = matchData.find(m => m.id === id);
            alert(`Edit Match: ${match.opponent}\n\nThis would open a form to modify the match analysis details.`);
        }

        function deleteMatch(id) {
            const match = matchData.find(m => m.id === id);
            if (confirm(`Are you sure you want to delete the match against ${match.opponent}?`)) {
                matchData = matchData.filter(m => m.id !== id);
                filteredData = [...matchData];
                renderTable();
                alert(`Match against ${match.opponent} has been deleted.`);
            }
        }

        function addNewMatch() {
            alert('Add New Match Report\n\nThis would open a form to add a new match with statistics and analysis.');
        }

        // Initialize
        generateMatchData();
        renderTable();
    </script>
</body>
</html>

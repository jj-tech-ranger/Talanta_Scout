<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recruitment Pipeline - Coach Dashboard</title>
    <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>TalantaScout</h2>
            <p class="user-role">Coach</p>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard.html"><i class="icon">üìä</i> Dashboard</a>
            <a href="teammanagement.html"><i class="icon">üë•</i> Team Management</a>
            <a href="trainingplans.html"><i class="icon">üèãÔ∏è</i> Training Plans</a>
            <a href="matchanalysis.html"><i class="icon">‚öΩ</i> Match Analysis</a>
            <a href="recruitmentpipeline.html" class="active"><i class="icon">üîç</i> Recruitment Pipeline</a>
            <a href="messages.html"><i class="icon">üí¨</i> Messages</a>
            <a href="profile.html"><i class="icon">üë§</i> Profile</a>
            <a href="../index.html"><i class="icon">üö™</i> Logout</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <header class="page-header">
            <h1>Recruitment Pipeline</h1>
            <div class="header-actions">
                <button class="btn-primary" onclick="addProspect()">+ Add Prospect</button>
            </div>
        </header>

        <!-- Pipeline Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Prospects</h3>
                <p class="stat-value" id="totalProspects">20</p>
            </div>
            <div class="stat-card">
                <h3>Under Review</h3>
                <p class="stat-value" id="underReview">8</p>
            </div>
            <div class="stat-card">
                <h3>Contacted</h3>
                <p class="stat-value" id="contacted">7</p>
            </div>
            <div class="stat-card">
                <h3>Signed</h3>
                <p class="stat-value" id="signed">5</p>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <input type="text" id="searchProspect" placeholder="Search prospects..." oninput="filterProspects()">
            <select id="filterStage" onchange="filterProspects()">
                <option value="">All Stages</option>
                <option value="Identified">Identified</option>
                <option value="Under Review">Under Review</option>
                <option value="Contacted">Contacted</option>
                <option value="Negotiating">Negotiating</option>
                <option value="Signed">Signed</option>
            </select>
            <select id="filterPosition" onchange="filterProspects()">
                <option value="">All Positions</option>
                <option value="Goalkeeper">Goalkeeper</option>
                <option value="Defender">Defender</option>
                <option value="Midfielder">Midfielder</option>
                <option value="Forward">Forward</option>
            </select>
        </div>

        <!-- Recruitment Pipeline Table -->
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Player Name</th>
                        <th>Position</th>
                        <th>Age</th>
                        <th>Current Club</th>
                        <th>Location</th>
                        <th>Stage</th>
                        <th>Priority</th>
                        <th>Last Contact</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="pipelineTable">
                    <!-- Table rows will be generated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <!-- Pagination buttons will be generated by JavaScript -->
        </div>
    </div>

    <script>
        // Sample recruitment data
        let recruitmentData = [];
        let filteredData = [];
        let currentPage = 1;
        const itemsPerPage = 5;

        // Generate sample recruitment data
        function generateRecruitmentData() {
            const names = [
                'David Odhiambo', 'Eric Kamau', 'Felix Otieno', 'George Maina',
                'Henry Wafula', 'Isaac Njuguna', 'Jacob Omondi', 'Kenneth Kiprono',
                'Lawrence Barasa', 'Moses Wanyama', 'Nathan Mwangi', 'Oscar Kimani',
                'Paul Cheruiyot', 'Quincy Okoth', 'Richard Mutua', 'Simon Kipchoge',
                'Thomas Nganga', 'Vincent Makokha', 'William Odero', 'Xavier Ouma'
            ];
            const positions = ['Goalkeeper', 'Defender', 'Midfielder', 'Forward'];
            const clubs = [
                'Gor Mahia Youth', 'AFC Leopards U20', 'Tusker Academy', 'KCB Youth',
                'Bandari Juniors', 'Nzoia Sugar Youth', 'Ulinzi Stars Academy', 'Mathare Youth'
            ];
            const locations = ['Nairobi', 'Mombasa', 'Kisumu', 'Nakuru', 'Eldoret', 'Kakamega'];
            const stages = ['Identified', 'Under Review', 'Contacted', 'Negotiating', 'Signed'];
            const priorities = ['High', 'Medium', 'Low'];
            
            for (let i = 0; i < 20; i++) {
                const lastContact = new Date(2025, 0, Math.floor(Math.random() * 28) + 1);
                
                recruitmentData.push({
                    id: i + 1,
                    name: names[i],
                    position: positions[i % 4],
                    age: Math.floor(Math.random() * 7) + 18,
                    currentClub: clubs[i % 8],
                    location: locations[i % 6],
                    stage: stages[i % 5],
                    priority: priorities[i % 3],
                    lastContact: lastContact.toLocaleDateString('en-GB')
                });
            }
            filteredData = [...recruitmentData];
        }

        // Filter prospects
        function filterProspects() {
            const searchTerm = document.getElementById('searchProspect').value.toLowerCase();
            const stageFilter = document.getElementById('filterStage').value;
            const positionFilter = document.getElementById('filterPosition').value;

            filteredData = recruitmentData.filter(prospect => {
                const matchesSearch = prospect.name.toLowerCase().includes(searchTerm);
                const matchesStage = !stageFilter || prospect.stage === stageFilter;
                const matchesPosition = !positionFilter || prospect.position === positionFilter;
                return matchesSearch && matchesStage && matchesPosition;
            });

            currentPage = 1;
            renderTable();
        }

        // Render table
        function renderTable() {
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = filteredData.slice(startIndex, endIndex);

            const tableBody = document.getElementById('pipelineTable');
            tableBody.innerHTML = '';

            pageData.forEach(prospect => {
                const stageClass = prospect.stage === 'Signed' ? 'badge-success' : 
                                  prospect.stage === 'Negotiating' ? 'badge-warning' : 
                                  prospect.stage === 'Contacted' ? 'badge-info' : 'badge-secondary';
                const priorityClass = prospect.priority === 'High' ? 'badge-danger' : 
                                     prospect.priority === 'Medium' ? 'badge-warning' : 'badge-secondary';
                const row = `
                    <tr>
                        <td><strong>${prospect.name}</strong></td>
                        <td>${prospect.position}</td>
                        <td>${prospect.age}</td>
                        <td>${prospect.currentClub}</td>
                        <td>${prospect.location}</td>
                        <td><span class="badge ${stageClass}">${prospect.stage}</span></td>
                        <td><span class="badge ${priorityClass}">${prospect.priority}</span></td>
                        <td>${prospect.lastContact}</td>
                        <td>
                            <button class="btn-small" onclick="viewProspect(${prospect.id})">View</button>
                            <button class="btn-small btn-secondary" onclick="updateStage(${prospect.id})">Update</button>
                            <button class="btn-small btn-danger" onclick="removeProspect(${prospect.id})">Remove</button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });

            renderPagination();
        }

        // Render pagination
        function renderPagination() {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';

            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.className = i === currentPage ? 'active' : '';
                button.onclick = () => {
                    currentPage = i;
                    renderTable();
                };
                paginationDiv.appendChild(button);
            }
        }

        // Prospect actions
        function viewProspect(id) {
            const prospect = recruitmentData.find(p => p.id === id);
            alert(`Prospect Details\n\nName: ${prospect.name}\nPosition: ${prospect.position}\nAge: ${prospect.age}\nCurrent Club: ${prospect.currentClub}\nLocation: ${prospect.location}\nStage: ${prospect.stage}\nPriority: ${prospect.priority}\nLast Contact: ${prospect.lastContact}`);
        }

        function updateStage(id) {
            const prospect = recruitmentData.find(p => p.id === id);
            alert(`Update Recruitment Stage: ${prospect.name}\n\nThis would open a form to update the recruitment stage and add notes.`);
        }

        function removeProspect(id) {
            const prospect = recruitmentData.find(p => p.id === id);
            if (confirm(`Are you sure you want to remove ${prospect.name} from the pipeline?`)) {
                recruitmentData = recruitmentData.filter(p => p.id !== id);
                filteredData = [...recruitmentData];
                renderTable();
                alert(`${prospect.name} has been removed from the recruitment pipeline.`);
            }
        }

        function addProspect() {
            alert('Add New Prospect\n\nThis would open a form to add a new player to the recruitment pipeline.');
        }

        // Initialize
        generateRecruitmentData();
        renderTable();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management - Admin Dashboard</title>
    <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>TalantaScout</h2>
            <p class="user-role">Admin</p>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard.html"><i class="icon">ğŸ“Š</i> Dashboard</a>
            <a href="usermanagement.html" class="active"><i class="icon">ğŸ‘¥</i> User Management</a>
            <a href="platformanalytics.html"><i class="icon">ğŸ“Š</i> Platform Analytics</a>
            <a href="subscriptioncontrol.html"><i class="icon">ğŸ’³</i> Subscription Control</a>
            <a href="contentmanagement.html"><i class="icon">ğŸ“</i> Content Management</a>
            <a href="systemsettings.html"><i class="icon">âš™ï¸</i> System Settings</a>
            <a href="supportmoderation.html"><i class="icon">ğŸ‘®</i> Support & Moderation</a>
            <a href="auditlogs.html"><i class="icon">ğŸ“‘</i> Audit Logs</a>
            <a href="profile.html"><i class="icon">ğŸ‘¤</i> Profile</a>
            <a href="../index.html"><i class="icon">ğŸšª</i> Logout</a>
        </nav>
    </div>

    <div class="main-content">
        <header class="page-header">
            <h1>User Management</h1>
            <div class="header-actions">
                <button class="btn-primary" onclick="addUser()">+ Add User</button>
            </div>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Users</h3>
                <p class="stat-value">250</p>
            </div>
            <div class="stat-card">
                <h3>Active Users</h3>
                <p class="stat-value">235</p>
            </div>
            <div class="stat-card">
                <h3>Suspended</h3>
                <p class="stat-value">10</p>
            </div>
            <div class="stat-card">
                <h3>New This Month</h3>
                <p class="stat-value">42</p>
            </div>
        </div>

        <div class="filters-section">
            <input type="text" id="searchUser" placeholder="Search users..." oninput="filterUsers()">
            <select id="filterRole" onchange="filterUsers()">
                <option value="">All Roles</option>
                <option value="Player">Player</option>
                <option value="Scout">Scout</option>
                <option value="Coach">Coach</option>
                <option value="Admin">Admin</option>
            </select>
            <select id="filterStatus" onchange="filterUsers()">
                <option value="">All Status</option>
                <option value="Active">Active</option>
                <option value="Suspended">Suspended</option>
                <option value="Inactive">Inactive</option>
            </select>
        </div>

        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Role</th>
                        <th>Subscription</th>
                        <th>Status</th>
                        <th>Joined</th>
                        <th>Last Active</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="usersTable"></tbody>
            </table>
        </div>

        <div class="pagination" id="pagination"></div>
    </div>

    <script>
        let usersData = [];
        let filteredData = [];
        let currentPage = 1;
        const itemsPerPage = 5;

        function generateUsersData() {
            const names = [
                'John Kamau', 'Mary Wanjiru', 'David Ochieng', 'Sarah Njeri', 'Peter Otieno',
                'Grace Achieng', 'James Mwangi', 'Lucy Nyambura', 'Michael Kipchoge', 'Jane Muthoni',
                'Patrick Wafula', 'Rose Wangari', 'Daniel Makokha', 'Alice Chebet', 'Samuel Barasa',
                'Nancy Akinyi', 'Robert Mutua', 'Emma Njoroge', 'Kevin Ouma', 'Faith Wambui'
            ];
            const roles = ['Player', 'Scout', 'Coach', 'Admin'];
            const tiers = ['Basic', 'Bronze', 'Silver', 'Gold', 'Platinum'];
            const statuses = ['Active', 'Active', 'Active', 'Active', 'Suspended'];
            
            for (let i = 0; i < 20; i++) {
                usersData.push({
                    id: i + 1,
                    name: names[i],
                    email: names[i].toLowerCase().replace(' ', '.') + '@talantascout.com',
                    role: roles[i % 4],
                    subscription: tiers[i % 5],
                    status: statuses[i % 5],
                    joined: new Date(2024, Math.floor(Math.random() * 12), Math.floor(Math.random() * 28) + 1).toLocaleDateString('en-GB'),
                    lastActive: 'Today'
                });
            }
            filteredData = [...usersData];
        }

        function filterUsers() {
            const search = document.getElementById('searchUser').value.toLowerCase();
            const role = document.getElementById('filterRole').value;
            const status = document.getElementById('filterStatus').value;

            filteredData = usersData.filter(user => {
                return user.name.toLowerCase().includes(search) &&
                       (!role || user.role === role) &&
                       (!status || user.status === status);
            });
            currentPage = 1;
            renderTable();
        }

        function renderTable() {
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageData = filteredData.slice(start, end);
            const tbody = document.getElementById('usersTable');
            tbody.innerHTML = '';

            pageData.forEach(user => {
                const statusClass = user.status === 'Active' ? 'badge-success' : 
                                  user.status === 'Suspended' ? 'badge-danger' : 'badge-secondary';
                tbody.innerHTML += `
                    <tr>
                        <td><strong>${user.name}</strong></td>
                        <td>${user.email}</td>
                        <td>${user.role}</td>
                        <td>${user.subscription}</td>
                        <td><span class="badge ${statusClass}">${user.status}</span></td>
                        <td>${user.joined}</td>
                        <td>${user.lastActive}</td>
                        <td>
                            <button class="btn-small" onclick="viewUser(${user.id})">View</button>
                            <button class="btn-small btn-secondary" onclick="editUser(${user.id})">Edit</button>
                            <button class="btn-small btn-danger" onclick="deleteUser(${user.id})">Delete</button>
                        </td>
                    </tr>
                `;
            });
            renderPagination();
        }

        function renderPagination() {
            const totalPages = Math.ceil(filteredData.length / itemsPerPage);
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement('button');
                btn.textContent = i;
                btn.className = i === currentPage ? 'active' : '';
                btn.onclick = () => { currentPage = i; renderTable(); };
                pagination.appendChild(btn);
            }
        }

        function viewUser(id) {
            const user = usersData.find(u => u.id === id);
            alert(`User Details\n\nName: ${user.name}\nEmail: ${user.email}\nRole: ${user.role}\nSubscription: ${user.subscription}\nStatus: ${user.status}`);
        }

        function editUser(id) {
            alert('Edit user functionality would open a modal here.');
        }

        function deleteUser(id) {
            if (confirm('Are you sure you want to delete this user?')) {
                usersData = usersData.filter(u => u.id !== id);
                filteredData = [...usersData];
                renderTable();
            }
        }

        function addUser() {
            alert('Add user functionality would open a modal here.');
        }

        generateUsersData();
        renderTable();
    </script>
</body>
</html>
